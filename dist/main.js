(()=>{"use strict";(e=>{let t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds");function c(){let e=(new Date("29 november 2022").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t}}c().timeRemaining>0?setInterval((function(){let e=c();e.hours<10?t.textContent="0"+e.hours:t.textContent=e.hours,e.minutes<10?o.textContent="0"+e.minutes:o.textContent=e.minutes,e.seconds<10?n.textContent="0"+e.seconds:n.textContent=e.seconds}),1e3):(t.textContent="00",o.textContent="00",n.textContent="00")})(),(()=>{const e=document.querySelector("menu"),t=document.querySelector("body"),o=document.querySelector(".close-btn"),n=document.querySelector("ul").querySelectorAll("li");(()=>{const e=[document.querySelector("#service-block").getBoundingClientRect().top,document.querySelector("#portfolio").getBoundingClientRect().top,document.querySelector("#calc").getBoundingClientRect().top,document.querySelector("#command").getBoundingClientRect().top,document.querySelector("#connect").getBoundingClientRect().top];for(let t=0;t<n.length;t++)n[t].addEventListener("click",(function(o){o.preventDefault();let n=document.documentElement.scrollTop,c=setInterval((function(){n<e[t]&&(n+=20,document.documentElement.scrollTop=n)}),2);setTimeout((function(){clearInterval(c)}),2e3)}))})(),document.querySelector("main").querySelector("a").addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector("#service-block").getBoundingClientRect().top;let o=document.documentElement.scrollTop,n=setInterval((()=>{o<t&&(o+=20,document.documentElement.scrollTop=o)}),5);setTimeout((function(){clearInterval(n)}),500)})),t.addEventListener("click",(t=>{const n=t.target;(n.closest(".menu")||n===o||e.classList.contains("active-menu")&&n!==e&&!n.matches("li"))&&e.classList.toggle("active-menu")}))})(),(()=>{const e=document.querySelector(".popup");document.querySelectorAll(".popup-btn").forEach((t=>{t.addEventListener("click",(()=>{let t=0;if(e.style.display="block",screen.availWidth>768){e.style.opacity="0";let o=setInterval((function(){t+=.02,e.style.opacity=`${t}`}),10);setTimeout((function(){clearInterval(o)}),600)}})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,c)=>{e===n&&(e=>{for(let n=0;n<o.length;n++)e===n?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(t[n].classList.remove("active"),o[n].classList.add("d-none"))})(c)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),o=document.querySelector(".portfolio-dots");let n,c=[],l=0;for(let t=0;t<e.length;t++){let e=document.createElement("li");e.classList.add("dot"),c[t]=e,c[0].classList.add("dot-active"),o.append(c[t])}const r=(e,t,o)=>{e[t].classList.remove(o)},s=(e,t,o)=>{e[t].classList.add(o)},a=()=>{r(e,l,"portfolio-item-active"),r(c,l,"dot-active"),l++,l>=e.length&&(l=0),s(e,l,"portfolio-item-active"),s(c,l,"dot-active")},i=(e=1500)=>{n=setInterval(a,e)};t.addEventListener("click",(t=>{t.preventDefault();let o=t.target;o.matches(".portfolio-btn, .dot")&&(r(e,l,"portfolio-item-active"),r(c,l,"dot-active"),o.matches("#arrow-right")?l++:o.matches("#arrow-left")?l--:o.matches(".dot")&&c.forEach(((e,t)=>{e===o&&(l=t)})),l>=e.length&&(l=0),l<0&&(l=e.length-1),s(e,l,"portfolio-item-active"),s(c,l,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(n)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(1500)})(),(()=>{const e=document.querySelector(".command").querySelectorAll("img");e.forEach(((t,o)=>{e[o].addEventListener("mouseenter",(e=>{const t=e.target,o=t.src;t.src=t.dataset.img,t.dataset.img=o})),e[o].addEventListener("mouseleave",(e=>{const t=e.target,o=t.src;t.src=t.dataset.img,t.dataset.img=o}))}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),c=document.querySelector(".calc-day"),l=document.querySelector(".calc-count"),r=document.getElementById("total");t.addEventListener("change",(t=>{const s=t.target;(s.matches("select")||s.matches("input"))&&(()=>{let t=0,s=1,a=1;const i=o.options[o.selectedIndex].value,u=+n.value;l.value>1&&(s+=(l.value-1)/10),c.value&&c.value<5?a*=2:c.value&&c.value<10?a*=1.5:a*=1.1,i&&u&&(t=e*i*u*s*a);let d=0,m=setInterval((()=>{d<t&&(d+=100,r.textContent=d)}),10);setTimeout((()=>{clearInterval(m),r.textContent=Math.round(t)}),800)})()}))})(100),(()=>{const e=document.createElement("div");e.style.cssText="font-size : 2rem;",e.style.color="white",document.querySelectorAll("form").forEach((t=>{const o=t.querySelectorAll("input");t.addEventListener("submit",(n=>{n.preventDefault(),t.appendChild(e),e.textContent="Загрузка...";const c=new FormData(t);let l={};c.forEach(((e,t)=>{l[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(l).then((t=>{if(200!==t.status)throw new Error("status network not 200");console.log(t),e.textContent="Спасибо! Мы скоро с вами свяжемся!"})).catch((t=>{e.textContent="Что-то пошло не так...",console.log(t)})),o.forEach((e=>{e.value=""}))}))}))})(),document.querySelectorAll("form").forEach((e=>{e.querySelectorAll("input").forEach((e=>{e.addEventListener("input",(()=>{e.classList.contains("form-phone")&&(e.value=e.value.replace(/[^\d+]/,"")),(e.classList.contains("mess")||e.classList.contains("form-name")||"form2-name"===e.id)&&(e.value=e.value.replace(/[^А-Яа-яёЁ\s]/,""))}))}))}))})();